{#include main.html}
{#title}Dashboard - Fuggs Buchhaltung{/title}

{#moreStyles}
{/moreStyles}

<div class="page-header">
  <h1>Dashboard</h1>
  <span class="bald-tag">
    <svg viewBox="0 0 32 32"><path d="M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 1 1 12-12 12 12 0 0 1-12 12Z"/><path d="M16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8ZM16 13a1 1 0 0 0-1 1v8a1 1 0 0 0 2 0v-8a1 1 0 0 0-1-1Z"/></svg>
    Bald verfügbar
  </span>
</div>

<!-- Summary Tiles -->
<div class="dashboard-grid">
  <div class="stat-tile blue mock-overlay">
    <span class="mock-badge">Mock</span>
    <div class="stat-tile-label">
      <svg viewBox="0 0 32 32" width="16" height="16" fill="currentColor"><path d="M25.7 9.3l-7-7A.91.91 0 0 0 18 2H8a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V10a.91.91 0 0 0-.3-.7ZM18 4.4l5.6 5.6H18ZM24 28H8V4h8v6a2 2 0 0 0 2 2h6Z"/></svg>
      Belege diesen Monat
    </div>
    <div class="stat-tile-value">24</div>
    <div class="stat-tile-trend up">
      <svg viewBox="0 0 32 32"><path d="M16 4l-8 8 1.4 1.4L15 7.8V28h2V7.8l5.6 5.6L24 12z"/></svg>
      +12% zum Vormonat
    </div>
  </div>

  <div class="stat-tile green mock-overlay">
    <span class="mock-badge">Mock</span>
    <div class="stat-tile-label">
      <svg viewBox="0 0 32 32" width="16" height="16" fill="currentColor"><path d="M2 28h28v2H2zM25 18l1.41 1.41L21 24.83l-6-6-9.41 9.41L4.17 26.83 15 16l6 6 4-4.17L25 18z"/></svg>
      Einnahmen
    </div>
    <div class="stat-tile-value">12.450 €</div>
    <div class="stat-tile-trend up">
      <svg viewBox="0 0 32 32"><path d="M16 4l-8 8 1.4 1.4L15 7.8V28h2V7.8l5.6 5.6L24 12z"/></svg>
      +8% zum Vormonat
    </div>
  </div>

  <div class="stat-tile red mock-overlay">
    <span class="mock-badge">Mock</span>
    <div class="stat-tile-label">
      <svg viewBox="0 0 32 32" width="16" height="16" fill="currentColor"><path d="M2 28h28v2H2zM25 24l1.41-1.41L21 17.17l-6 6-9.41-9.41L4.17 15.17 15 26l6-6 4 4.17L25 24z"/></svg>
      Ausgaben
    </div>
    <div class="stat-tile-value">8.320 €</div>
    <div class="stat-tile-trend down">
      <svg viewBox="0 0 32 32"><path d="M16 28l8-8-1.4-1.4L17 24.2V4h-2v20.2l-5.6-5.6L8 20z"/></svg>
      -3% zum Vormonat
    </div>
  </div>

  <div class="stat-tile purple mock-overlay">
    <span class="mock-badge">Mock</span>
    <div class="stat-tile-label">
      <svg viewBox="0 0 32 32" width="16" height="16" fill="currentColor"><path d="M10.5 16a5.5 5.5 0 1 0-5.5-5.5A5.5 5.5 0 0 0 10.5 16Zm0-9a3.5 3.5 0 1 1-3.5 3.5A3.5 3.5 0 0 1 10.5 7ZM10.5 18a9.51 9.51 0 0 0-9.5 9.5 1 1 0 0 0 2 0 7.5 7.5 0 0 1 15 0 1 1 0 0 0 2 0 9.51 9.51 0 0 0-9.5-9.5ZM27 5h-3V2h-2v3h-3v2h3v3h2V7h3z"/></svg>
      Offene Aufgaben
    </div>
    <div class="stat-tile-value">7</div>
    <div class="stat-tile-trend">
      <span style="color: var(--cds-text-secondary);">3 mit hoher Priorität</span>
    </div>
  </div>
</div>

<!-- Charts Row -->
<div class="charts-row">
  <!-- Donut Chart -->
  <div class="chart-box mock-overlay">
    <span class="mock-badge">Mock</span>
    <div class="chart-header">
      <div>
        <h3 class="chart-title">
          <svg viewBox="0 0 32 32" width="18" height="18" fill="currentColor"><path d="M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 0 1 0-24Z"/></svg>
          Belegtypen
        </h3>
        <span class="chart-subtitle">Verteilung nach Typ</span>
      </div>
    </div>
    <div style="max-width: 300px; margin: 0 auto;">
      <canvas id="documentTypesChart"></canvas>
    </div>
  </div>

  <!-- Bar Chart -->
  <div class="chart-box mock-overlay">
    <span class="mock-badge">Mock</span>
    <div class="chart-header">
      <div>
        <h3 class="chart-title">
          <svg viewBox="0 0 32 32" width="18" height="18" fill="currentColor"><path d="M27 28V6h-8v22h-4V14H7v14H4V2H2v26a2 2 0 0 0 2 2h26v-2Zm-14 0H9V16h4Zm12 0h-4V8h4Z"/></svg>
          Einnahmen vs. Ausgaben
        </h3>
        <span class="chart-subtitle">Letzte 6 Monate</span>
      </div>
    </div>
    <div style="height: 280px;">
      <canvas id="incomeExpenseChart"></canvas>
    </div>
  </div>
</div>

<!-- Meine Aufgaben Section -->
<div class="tasks-section mock-overlay">
  <span class="mock-badge">Mock</span>
  <div class="tasks-header">
    <h3 class="tasks-title">
      <svg viewBox="0 0 32 32" width="18" height="18" fill="currentColor"><path d="M14 21.414l-5-5.001L10.413 15 14 18.586 21.585 11 23 12.415l-9 8.999z"/><path d="M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 1 1 12-12 12 12 0 0 1-12 12Z"/></svg>
      Meine Aufgaben
      <span class="bald-tag">
        <svg viewBox="0 0 32 32"><path d="M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 1 1 12-12 12 12 0 0 1-12 12Z"/><path d="M16 8a1.5 1.5 0 1 0 1.5 1.5A1.5 1.5 0 0 0 16 8ZM16 13a1 1 0 0 0-1 1v8a1 1 0 0 0 2 0v-8a1 1 0 0 0-1-1Z"/></svg>
        Bald
      </span>
    </h3>
    <cds-button href="#" kind="secondary" style="height: 32px; font-size: 0.75rem;">Alle anzeigen</cds-button>
  </div>
  <ul class="task-list">
    <li class="task-item">
      <div class="task-checkbox"></div>
      <div class="task-content">
        <div class="task-title">Rechnung #2024-089 prüfen und freigeben</div>
        <div class="task-meta">Fällig: Heute • Lieferant GmbH</div>
      </div>
      <span class="task-priority high">Hoch</span>
    </li>
    <li class="task-item">
      <div class="task-checkbox"></div>
      <div class="task-content">
        <div class="task-title">Fehlende Belege für November nachreichen</div>
        <div class="task-meta">Fällig: 27. Dez 2024</div>
      </div>
      <span class="task-priority high">Hoch</span>
    </li>
    <li class="task-item">
      <div class="task-checkbox"></div>
      <div class="task-content">
        <div class="task-title">Monatliche Ausgabenübersicht erstellen</div>
        <div class="task-meta">Fällig: 31. Dez 2024</div>
      </div>
      <span class="task-priority medium">Mittel</span>
    </li>
    <li class="task-item">
      <div class="task-checkbox"></div>
      <div class="task-content">
        <div class="task-title">Bommel "Büromaterial" Belege zuordnen</div>
        <div class="task-meta">Fällig: 02. Jan 2025 • 5 Belege</div>
      </div>
      <span class="task-priority low">Niedrig</span>
    </li>
    <li class="task-item">
      <div class="task-checkbox"></div>
      <div class="task-content">
        <div class="task-title">Jahresabschluss vorbereiten</div>
        <div class="task-meta">Fällig: 15. Jan 2025</div>
      </div>
      <span class="task-priority high">Hoch</span>
    </li>
  </ul>
</div>

{#moreScripts}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Donut Chart - Document Types
    const documentTypesCtx = document.getElementById('documentTypesChart');
    if (documentTypesCtx) {
      new Chart(documentTypesCtx, {
        type: 'doughnut',
        data: {
          labels: ['Rechnungen', 'Quittungen', 'Sonstige'],
          datasets: [{
            data: [14, 7, 3],
            backgroundColor: [
              '#0f62fe',  // IBM Blue 60
              '#24a148',  // IBM Green 60
              '#f1c21b'   // IBM Yellow 30
            ],
            borderWidth: 0,
            hoverOffset: 4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                padding: 15,
                font: {
                  family: 'IBM Plex Sans',
                  size: 14
                },
                usePointStyle: true,
                pointStyle: 'circle',
                generateLabels: function(chart) {
                  const data = chart.data;
                  if (data.labels.length && data.datasets.length) {
                    return data.labels.map(function(label, i) {
                      const value = data.datasets[0].data[i];
                      return {
                        text: label + ': ' + value,
                        fillStyle: data.datasets[0].backgroundColor[i],
                        hidden: false,
                        index: i
                      };
                    });
                  }
                  return [];
                }
              }
            },
            tooltip: {
              backgroundColor: '#262626',
              titleFont: {
                family: 'IBM Plex Sans',
                size: 14
              },
              bodyFont: {
                family: 'IBM Plex Sans',
                size: 14
              },
              padding: 12,
              displayColors: true,
              callbacks: {
                label: function(context) {
                  return context.label + ': ' + context.parsed;
                }
              }
            }
          }
        }
      });
    }

    // Bar Chart - Income vs Expense
    const incomeExpenseCtx = document.getElementById('incomeExpenseChart');
    if (incomeExpenseCtx) {
      new Chart(incomeExpenseCtx, {
        type: 'bar',
        data: {
          labels: ['Jul', 'Aug', 'Sep', 'Okt', 'Nov', 'Dez'],
          datasets: [
            {
              label: 'Einnahmen',
              data: [7200, 9000, 6600, 9600, 10800, 12000],
              backgroundColor: '#24a148',  // IBM Green 60
              borderRadius: 4,
              borderSkipped: false
            },
            {
              label: 'Ausgaben',
              data: [5400, 6000, 7800, 4800, 6600, 7800],
              backgroundColor: '#da1e28',  // IBM Red 60
              borderRadius: 4,
              borderSkipped: false
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'bottom',
              labels: {
                padding: 15,
                font: {
                  family: 'IBM Plex Sans',
                  size: 14
                },
                usePointStyle: true,
                pointStyle: 'rect'
              }
            },
            tooltip: {
              backgroundColor: '#262626',
              titleFont: {
                family: 'IBM Plex Sans',
                size: 14
              },
              bodyFont: {
                family: 'IBM Plex Sans',
                size: 14
              },
              padding: 12,
              displayColors: true,
              callbacks: {
                label: function(context) {
                  return context.dataset.label + ': ' + context.parsed.y.toLocaleString('de-DE') + ' €';
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              ticks: {
                font: {
                  family: 'IBM Plex Sans',
                  size: 12
                },
                callback: function(value) {
                  return value.toLocaleString('de-DE') + ' €';
                }
              },
              grid: {
                color: '#e0e0e0',
                drawBorder: false
              }
            },
            x: {
              ticks: {
                font: {
                  family: 'IBM Plex Sans',
                  size: 12
                }
              },
              grid: {
                display: false,
                drawBorder: false
              }
            }
          }
        }
      });
    }
  });
</script>
{/moreScripts}

{/include}
